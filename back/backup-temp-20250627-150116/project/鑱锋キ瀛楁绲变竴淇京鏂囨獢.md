# è·æ¥­å­—æ®µçµ±ä¸€ä¿®å¾©å®Œæˆå ±å‘Š

## ğŸ“‹ å•é¡Œç¸½çµ

åœ¨AIå‹åŸºæ³•é¡§å•é …ç›®ä¸­ï¼Œç™¼ç¾è·æ¥­å­—æ®µä¸çµ±ä¸€çš„å•é¡Œï¼š
- å‰ç«¯ç™¼é€ `occupation` å­—æ®µï¼Œä½†å¾Œç«¯æœŸæœ› `position`
- APIéŸ¿æ‡‰æ ¼å¼ä¸çµ±ä¸€ï¼Œå°è‡´å‰ç«¯é¡¯ç¤º"æœªçŸ¥"è·æ¥­
- ç¼ºä¹å‘å¾Œå…¼å®¹æ€§ï¼Œæ–°èˆŠå­—æ®µæ··ç”¨

## âœ… å·²å®Œæˆçš„å¾Œç«¯ä¿®æ”¹

### 1. ç”¨æˆ¶è¨»å†ŠAPI (`/api/v1/auth/register`)
**æ–‡ä»¶**: `backend/src/controllers/auth.controller.js`

**ä¿®æ”¹å…§å®¹**:
- åŒæ™‚æ”¯æŒ `position` å’Œ `occupation` å­—æ®µ
- å„ªå…ˆä½¿ç”¨ `position`ï¼Œfallback åˆ° `occupation`
- çµ±ä¸€éŸ¿æ‡‰æ ¼å¼ï¼Œå°‡åµŒå¥—çš„ `profile.position` æ˜ å°„åˆ°æ ¹ç´š `position` å­—æ®µ

**éŸ¿æ‡‰æ ¼å¼è®Šæ›´**:
```javascript
// æ–°çš„çµ±ä¸€éŸ¿æ‡‰æ ¼å¼
{
  "success": true,
  "data": {
    "user": {
      "id": "...",
      "name": "lau",
      "email": "lau@gmail.com",
      "industry": "education",
      "position": "hr",        // âœ… çµ±ä¸€çš„è·æ¥­å­—æ®µ
      "phoneNumber": "",       // âœ… çµ±ä¸€çš„æ‰‹æ©Ÿè™Ÿå­—æ®µ
      "companyName": "",       // âœ… çµ±ä¸€çš„å…¬å¸åå­—æ®µ
      // ... å…¶ä»–å­—æ®µ
    }
  }
}
```

### 2. ç”¨æˆ¶ç™»å…¥API (`/api/v1/auth/login`)
**æ–‡ä»¶**: `backend/src/controllers/auth.controller.js`

**ä¿®æ”¹å…§å®¹**:
- çµ±ä¸€éŸ¿æ‡‰æ ¼å¼ï¼Œå°‡åµŒå¥—å­—æ®µæ˜ å°„åˆ°æ ¹ç´š
- ç¢ºä¿è·æ¥­ä¿¡æ¯æ­£ç¢ºé¡¯ç¤º

### 3. ç”¨æˆ¶è³‡æ–™ç®¡ç†API
**æ–‡ä»¶**: `backend/src/controllers/user.controller.js`

**ä¿®æ”¹å…§å®¹**:
- **ç²å–ç”¨æˆ¶è³‡æ–™** (`GET /api/v1/users/me`): çµ±ä¸€éŸ¿æ‡‰æ ¼å¼
- **æ›´æ–°ç”¨æˆ¶è³‡æ–™** (`PUT /api/v1/users/me`): æ”¯æŒ `position` å’Œ `occupation` å­—æ®µ

### 4. ç®¡ç†å“¡ç”¨æˆ¶ç®¡ç†API
**æ–‡ä»¶**: `backend/src/controllers/admin/user.controller.js`

**ä¿®æ”¹å…§å®¹**:
- **ç²å–ç”¨æˆ¶åˆ—è¡¨** (`GET /api/v1/admin/users`): çµ±ä¸€éŸ¿æ‡‰æ ¼å¼
- **ç²å–ç”¨æˆ¶è©³æƒ…** (`GET /api/v1/admin/users/:id`): çµ±ä¸€éŸ¿æ‡‰æ ¼å¼
- **æ›´æ–°ç”¨æˆ¶è³‡æ–™** (`PUT /api/v1/admin/users/:id`): æ”¯æŒå‘å¾Œå…¼å®¹æ€§
- **å‰µå»ºç”¨æˆ¶** (`POST /api/v1/admin/users`): æ”¯æŒå‘å¾Œå…¼å®¹æ€§

### 5. æ•¸æ“šé©—è­‰
**æ–‡ä»¶**: `backend/src/validations/auth.validation.js`

**ä¿®æ”¹å…§å®¹**:
- æ·»åŠ å° `occupation` å­—æ®µçš„é©—è­‰æ”¯æŒ
- ä¿æŒèˆ‡ `position` å­—æ®µç›¸åŒçš„é©—è­‰è¦å‰‡

## ğŸ¯ å‰ç«¯éœ€è¦çš„èª¿æ•´

### 1. è¨»å†Šé é¢èª¿æ•´

**æ¨è–¦åšæ³•**: å°‡å‰ç«¯è¨»å†Šè¡¨å–®çš„å­—æ®µåå¾ `occupation` æ”¹ç‚º `position`

**æ–‡ä»¶éœ€è¦ä¿®æ”¹**:
- è¨»å†Šé é¢çš„è¡¨å–®çµ„ä»¶
- ä»»ä½•ç™¼é€è¨»å†Šè«‹æ±‚çš„JavaScriptä»£ç¢¼

**ç¤ºä¾‹ä¿®æ”¹**:
```javascript
// å¾é€™å€‹
const registrationData = {
  name: "ç”¨æˆ¶å",
  email: "email@example.com", 
  password: "password123",
  industry: "education",
  occupation: "hr"  // âŒ èˆŠå­—æ®µ
};

// æ”¹ç‚ºé€™å€‹
const registrationData = {
  name: "ç”¨æˆ¶å",
  email: "email@example.com",
  password: "password123", 
  industry: "education",
  position: "hr"    // âœ… æ–°å­—æ®µ
};
```

### 2. æ›´æ–°ç”¨æˆ¶è³‡æ–™é é¢èª¿æ•´

**åŒæ¨£å»ºè­°**: ä½¿ç”¨ `position` å­—æ®µè€Œé `occupation`

### 3. å‰ç«¯é¡¯ç¤ºé‚è¼¯èª¿æ•´

**ç”±æ–¼å¾Œç«¯ç¾åœ¨çµ±ä¸€è¿”å›æ ¹ç´šå­—æ®µï¼Œå‰ç«¯å¯ä»¥ç›´æ¥ä½¿ç”¨**:

```javascript
// APIéŸ¿æ‡‰è™•ç†
const user = response.data.user;
console.log(user.position);     // âœ… ç›´æ¥ä½¿ç”¨
console.log(user.industry);     // âœ… ç›´æ¥ä½¿ç”¨  
console.log(user.phoneNumber);  // âœ… ç›´æ¥ä½¿ç”¨
console.log(user.companyName);  // âœ… ç›´æ¥ä½¿ç”¨
```

## ğŸ”„ å‘å¾Œå…¼å®¹æ€§

**å¾Œç«¯å·²æ”¯æŒå‘å¾Œå…¼å®¹æ€§**ï¼Œå³ä½¿å‰ç«¯æš«æ™‚ä¸ä¿®æ”¹ï¼Œä»ç„¶å¯ä»¥:
- ç™¼é€ `occupation` å­—æ®µï¼ˆå¾Œç«¯æœƒè‡ªå‹•æ˜ å°„åˆ° `position`ï¼‰
- æ¥æ”¶çµ±ä¸€çš„ `position` å­—æ®µéŸ¿æ‡‰

**ä½†å¼·çƒˆå»ºè­°å‰ç«¯çµ±ä¸€ä½¿ç”¨ `position` å­—æ®µï¼Œä»¥ä¿æŒä¸€è‡´æ€§**ã€‚

## ğŸ“ æ¸¬è©¦å»ºè­°

### 1. è¨»å†Šæ¸¬è©¦
```javascript
// æ¸¬è©¦ç”¨ä¾‹1: ä½¿ç”¨æ–°å­—æ®µ
POST /api/v1/auth/register
{
  "name": "æ¸¬è©¦ç”¨æˆ¶",
  "email": "test@example.com",
  "password": "password123",
  "industry": "education", 
  "position": "hr"
}

// æœŸæœ›: è¨»å†ŠæˆåŠŸï¼ŒéŸ¿æ‡‰ä¸­ position ç‚º "hr"

// æ¸¬è©¦ç”¨ä¾‹2: ä½¿ç”¨èˆŠå­—æ®µï¼ˆå‘å¾Œå…¼å®¹ï¼‰
POST /api/v1/auth/register  
{
  "name": "æ¸¬è©¦ç”¨æˆ¶2",
  "email": "test2@example.com",
  "password": "password123",
  "industry": "education",
  "occupation": "hr"  
}

// æœŸæœ›: è¨»å†ŠæˆåŠŸï¼ŒéŸ¿æ‡‰ä¸­ position ç‚º "hr"
```

### 2. ç™»å…¥æ¸¬è©¦
```javascript
POST /api/v1/auth/login
{
  "email": "test@example.com",
  "password": "password123"
}

// æœŸæœ›: éŸ¿æ‡‰ä¸­åŒ…å«æ­£ç¢ºçš„ position å­—æ®µå€¼
```

### 3. ç”¨æˆ¶è³‡æ–™æ›´æ–°æ¸¬è©¦
```javascript
PUT /api/v1/users/me
{
  "position": "manager"
}

// æœŸæœ›: æ›´æ–°æˆåŠŸï¼ŒéŸ¿æ‡‰ä¸­ position ç‚º "manager"
```

## ğŸš€ éƒ¨ç½²ç‹€æ…‹

**æ‰€æœ‰å¾Œç«¯ä¿®æ”¹å·²å®Œæˆä¸¦å¯ç«‹å³éƒ¨ç½²**:
- âœ… å‘å¾Œå…¼å®¹æ€§ï¼šä¸æœƒç ´å£ç¾æœ‰åŠŸèƒ½
- âœ… æ–°åŠŸèƒ½ï¼šçµ±ä¸€å­—æ®µéŸ¿æ‡‰æ ¼å¼
- âœ… æ•¸æ“šå®Œæ•´æ€§ï¼šä¿è­‰è·æ¥­ä¿¡æ¯æ­£ç¢ºé¡¯ç¤º

## ğŸ“ ä¸‹ä¸€æ­¥è¡Œå‹•

1. **å‰ç«¯é–‹ç™¼åœ˜éšŠ**: æŒ‰ç…§æœ¬æ–‡æª”èª¿æ•´å‰ç«¯ä»£ç¢¼
2. **æ¸¬è©¦åœ˜éšŠ**: åŸ·è¡Œä¸Šè¿°æ¸¬è©¦ç”¨ä¾‹
3. **ç”¢å“åœ˜éšŠ**: é©—è­‰ç”¨æˆ¶è¨»å†Šæµç¨‹å’Œè·æ¥­ä¿¡æ¯é¡¯ç¤º

## ğŸ‰ é æœŸçµæœ

ä¿®æ”¹å®Œæˆå¾Œï¼Œç”¨æˆ¶è¨»å†Šæ™‚é¸æ“‡çš„è·æ¥­ä¿¡æ¯å°‡ï¼š
- âœ… æ­£ç¢ºä¿å­˜åˆ°æ•¸æ“šåº«
- âœ… æ­£ç¢ºé¡¯ç¤ºåœ¨å‰ç«¯å„é é¢
- âœ… æ”¯æŒæ–°èˆŠå…©ç¨®å­—æ®µæ ¼å¼
- âœ… æä¾›çµ±ä¸€çš„APIéŸ¿æ‡‰æ ¼å¼

---

**ä¿®æ”¹å®Œæˆæ—¥æœŸ**: 2025å¹´5æœˆ24æ—¥  
**ä¿®æ”¹äººå“¡**: AIåŠ©æ‰‹  
**å½±éŸ¿ç¯„åœ**: ç”¨æˆ¶è¨»å†Šã€ç™»å…¥ã€è³‡æ–™ç®¡ç†ã€ç®¡ç†å“¡åŠŸèƒ½  
**å…¼å®¹æ€§**: å®Œå…¨å‘å¾Œå…¼å®¹ 