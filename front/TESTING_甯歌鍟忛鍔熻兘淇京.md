# 常見問題功能修復 - 測試說明

## 🎯 修復目標
確保用戶點擊首頁常見問題時，會跳轉到AI法律諮詢的**新對話**，並且問題會自動填入輸入框。

## 🔧 修復內容

### 修復的文件
1. `src/views/HomeView.vue` - 網頁版首頁
2. `src/views/MobileHomeView.vue` - 移動版首頁
3. `src/views/ChatView.vue` - 網頁版聊天頁面
4. `src/views/MobileChatView.vue` - 移動版聊天頁面

### 修復邏輯
- **首頁修復**：移除本地會話創建，改為傳遞 `newSession=true` 參數
- **聊天頁面修復**：檢測 `newSession` 參數時強制創建新會話並填入問題

## ✅ 測試清單

### 網頁版測試
1. **測試入口**: 訪問 `/` 或 `/user/:userId`
2. **測試步驟**:
   - [ ] 點擊"如何計算加班費？"
   - [ ] 點擊"年終獎金是否強制？"
   - [ ] 點擊"勞健保如何計算？"
   - [ ] 點擊"試用期間可以解雇嗎？"

### 移動版測試
1. **測試入口**: 訪問 `/mobile`
2. **測試步驟**:
   - [ ] 點擊"如何計算加班費？"
   - [ ] 點擊"年終獎金是否強制？"
   - [ ] 點擊"勞健保如何計算？"

## 🎯 期望結果

### 每次點擊常見問題後應該：
1. ✅ **跳轉正確**: 跳轉到AI法律諮詢頁面
2. ✅ **新對話**: 創建全新的對話（不是加載現有對話）
3. ✅ **問題自動填入**: 點擊的問題文字出現在輸入框中
4. ✅ **聚焦輸入框**: 輸入框自動聚焦，用戶可以直接編輯或發送
5. ✅ **會話同步**: 新會話與後端API正確同步

### 驗證方法
1. **新對話驗證**: 檢查會話列表中是否出現新的對話項目
2. **問題填入驗證**: 確認輸入框中的文字與點擊的問題一致
3. **API同步驗證**: 發送消息後檢查後端是否正確識別會話

## 🚨 注意事項

### 可能的問題
1. **重複創建會話**: 如果多次快速點擊可能創建多個會話
2. **URL參數殘留**: `newSession` 參數應該在處理後自動清除
3. **移動版兼容性**: 確保移動版和網頁版行為一致

### 調試信息
修復後的代碼會在瀏覽器控制台輸出詳細的調試信息：
- `檢測到新會話請求，創建新會話並填入問題: xxx`
- `移動端檢測到新會話請求，創建新會話並填入問題: xxx`

## 📊 測試結果記錄

### 網頁版測試結果
| 常見問題 | 跳轉正確 | 新對話 | 問題填入 | 聚焦 | 狀態 |
|---------|---------|-------|---------|------|------|
| 如何計算加班費？ | [ ] | [ ] | [ ] | [ ] | 待測試 |
| 年終獎金是否強制？ | [ ] | [ ] | [ ] | [ ] | 待測試 |
| 勞健保如何計算？ | [ ] | [ ] | [ ] | [ ] | 待測試 |
| 試用期間可以解雇嗎？ | [ ] | [ ] | [ ] | [ ] | 待測試 |

### 移動版測試結果
| 常見問題 | 跳轉正確 | 新對話 | 問題填入 | 聚焦 | 狀態 |
|---------|---------|-------|---------|------|------|
| 如何計算加班費？ | [ ] | [ ] | [ ] | [ ] | 待測試 |
| 年終獎金是否強制？ | [ ] | [ ] | [ ] | [ ] | 待測試 |
| 勞健保如何計算？ | [ ] | [ ] | [ ] | [ ] | 待測試 |

## 🔄 回歸測試

### 確保現有功能不受影響
- [ ] 正常創建新會話功能正常
- [ ] 加載現有會話功能正常
- [ ] 會話列表顯示正常
- [ ] 消息發送和接收正常
- [ ] 會話切換功能正常

---

**測試完成後，請更新此文檔中的測試結果，並報告任何發現的問題。** 