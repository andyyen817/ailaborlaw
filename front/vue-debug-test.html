<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vueåº”ç”¨ç¯å¢ƒè°ƒè¯•</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; }
        .result { background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 4px; padding: 15px; margin: 10px 0; font-family: monospace; white-space: pre-wrap; max-height: 400px; overflow-y: auto; }
        .button { background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; margin: 5px; }
        .success { color: #28a745; } .error { color: #dc3545; } .warning { color: #ffc107; }
    </style>
</head>
<body>
    <h1>ğŸ” Vueåº”ç”¨ç¯å¢ƒè°ƒè¯•</h1>
    
    <button class="button" onclick="testVueEnvironment()">æµ‹è¯•Vueç¯å¢ƒä¸‹çš„aiChatService</button>
    <div id="result" class="result"></div>

    <!-- æ¨¡æ‹ŸVueåº”ç”¨çš„scriptå¯¼å…¥æ–¹å¼ -->
    <script type="module">
        // è®¾ç½®localStorageæ•°æ®ï¼ˆæ¨¡æ‹Ÿç”¨æˆ·å·²ç™»å½•çŠ¶æ€ï¼‰
        localStorage.setItem('auth_token', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ODMxNDBjZTM5YTEyODlhNDFiYjkyZDQiLCJ1c2VyVHlwZSI6ImVtcGxveWVlIiwiaWF0IjoxNzQ4NTIyODQ1LCJleHAiOjE3NDg2MDkyNDV9.irgBHSCJkdteGrioqUhYe8M8JuYID3LJlxde-PRDxdU');
        
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const prefix = type === 'error' ? 'âŒ' : type === 'success' ? 'âœ…' : type === 'warning' ? 'âš ï¸' : 'ğŸ“';
            return `[${timestamp}] ${prefix} ${message}`;
        }

        async function testVueEnvironment() {
            const resultEl = document.getElementById('result');
            let result = '';

            try {
                result += log('=== å¼€å§‹Vueç¯å¢ƒæµ‹è¯• ===') + '\n';

                // å°è¯•åŠ¨æ€å¯¼å…¥aiChatServiceï¼ˆæ¨¡æ‹ŸVueçš„ESæ¨¡å—ç¯å¢ƒï¼‰
                result += log('æ­£åœ¨å¯¼å…¥aiChatService...') + '\n';
                
                try {
                    // æ¨¡æ‹ŸVueåº”ç”¨ä¸­çš„å¯¼å…¥æ–¹å¼
                    const aiChatServiceModule = await import('./src/services/aiChatService.js');
                    const aiChatService = aiChatServiceModule.default;
                    
                    result += log('aiChatServiceå¯¼å…¥æˆåŠŸ', 'success') + '\n';
                    result += log(`aiChatServiceç±»å‹: ${typeof aiChatService}`) + '\n';
                    
                    // æµ‹è¯•getSessionListæ–¹æ³•
                    result += log('æ­£åœ¨è°ƒç”¨aiChatService.getSessionList()...') + '\n';
                    
                    const response = await aiChatService.getSessionList({
                        page: 1,
                        limit: 5
                    });
                    
                    result += log('aiChatService.getSessionList() è°ƒç”¨å®Œæˆ') + '\n';
                    result += log(`å“åº”ç±»å‹: ${typeof response}`) + '\n';
                    result += log(`å“åº”å†…å®¹: ${JSON.stringify(response, null, 2)}`) + '\n';
                    
                    if (response && response.success && response.data && response.data.sessions) {
                        result += log(`âœ… Vueç¯å¢ƒä¸‹è·å–åˆ° ${response.data.sessions.length} ä¸ªä¼šè¯`, 'success') + '\n';
                        result += log('Vueç¯å¢ƒæµ‹è¯•æˆåŠŸï¼å‰ç«¯é€»è¾‘æ²¡æœ‰é—®é¢˜', 'success') + '\n';
                    } else {
                        result += log('å“åº”æ ¼å¼å¼‚å¸¸', 'warning') + '\n';
                        result += log('å¯èƒ½æ˜¯Vueåº”ç”¨ä¸­çš„æ•°æ®å¤„ç†é€»è¾‘é—®é¢˜', 'warning') + '\n';
                    }
                    
                } catch (importError) {
                    result += log(`æ¨¡å—å¯¼å…¥å¤±è´¥: ${importError.message}`, 'error') + '\n';
                    result += log('è¿™å¯èƒ½æ˜¯Vueåº”ç”¨æ¨¡å—è§£æçš„é—®é¢˜', 'error') + '\n';
                }

            } catch (error) {
                result += log(`Vueç¯å¢ƒæµ‹è¯•å¤±è´¥: ${error.message}`, 'error') + '\n';
                result += log(`é”™è¯¯å †æ ˆ: ${error.stack}`, 'error') + '\n';
            }

            resultEl.textContent = result;
        }

        // æš´éœ²å‡½æ•°åˆ°å…¨å±€ä½œç”¨åŸŸ
        window.testVueEnvironment = testVueEnvironment;

    </script>
</body>
</html> 